<div class="container_fuild">
  <div class="row"> <!-- main row -->

    <!-- API section -->
    <div class="col-md-7">

      <!-- API title goes here -->
      <div class="row">
        <div class="col-md-3">
          <div class="corner_space"></div>
        </div>
        <div class="col-md-9">
          <h2>Case Management</h2>
          <p>Case Management API is Akamaiâ€™s technology for resolving questions or issues with your Akamai applications and services.</p>
          <hr>
        </div>
      </div>

      <!-- API content main body -->
      <div class="row">

        <!-- left menu -->
        <div class="col-md-3">
          <ul class="nav nav-pills nav-stacked">
            <li role="presentation" class="disabled"><a href="#"><h5>Categories</h5></a></li>
            <li role="presentation" onclick="showAPIActionContent('list_cases_per_category')"><a href="#">List Cases per Category</a></li>
            <li role="presentation" onclick="showAPIActionContent('create_case')"><a href="#">Create a Case</a></li>
            <li role="presentation" onclick="showAPIActionContent('list_professional')"><a href="#">List Professional Services Cases</a></li>
            <li role="presentation" onclick="showAPIActionContent('create_professional')"><a href="#">Create a Professional Services Case</a></li>
            <li role="presentation" class="disabled"><a href="#"><h5>Cases</h5></a></li>
            <li role="presentation" onclick="showAPIActionContent('cases')"><a href="#">Cases</a></li>
            <li role="presentation" onclick="showAPIActionContent('case')"><a href="#">Case</a></li>
            <li role="presentation" onclick="showAPIActionContent('comments')"><a href="#">Comments</a></li>
            <li role="presentation" onclick="showAPIActionContent('file_attachments')"><a href="#">File Attachments</a></li>
            <li role="presentation" onclick="showAPIActionContent('resolutions')"><a href="#">Resolutions</a></li>
          </ul>
        </div>

        <!-- API action content -->
        <div class="col-md-9">
          <div id="api_action_body_wrapper">

            <div id="list_cases_per_category" class="each_api_action" style="display: none">
              <div class="form-group">
                <label for="">Category</label>
                <select name="cateogry">
                <option value="technical">Technical_Support</option>
                <option value="billing">Billing_Support</option>
                <option value="business">Business_Support</option>
                </select>
              </div>
              <input class="btn btn-primary" type="button" value="Send Request" onclick="runAPI('list_cases_per_category')">
            </div>

            <div id="create_case" class="each_api_action" style="display: none">
              <div id="textarea_wrapper" class="form-group has-feedback">
                <label for="create_case_body">Create a Case Objects</label>
                <textarea id="create_case_body" class="form-control" rows="10" placeholder="" onkeydown="validateJsonTextarea('textarea_wrapper', 'create_case_body')"></textarea>
              </div>
              <input class="btn btn-success" type="button" value="Validate" onclick="validateJsonTextarea('textarea_wrapper', 'create_case_body')">
              <input class="btn btn-primary" type="button" value="Send Request" onclick="runAPI('create_case')">
            </div>

            <div id="list_professional" class="each_api_action" style="display: none">
              <div class="form-group">
                <label for="">List Professional Services Cases</label>
              </div>
              <input class="btn btn-primary" type="button" value="Send Request" onclick="runAPI('list_professional')">
            </div>

            <div id="create_professional" class="each_api_action" style="display: none">
              <div id="textarea_wrapper" class="form-group has-feedback">
                <label for="create_professional_body">Create a Prosessional Services Case Object</label>
                <textarea id="create_professional_body" class="form-control" rows="10" placeholder="" onkeydown="validateJsonTextarea('textarea_wrapper', 'create_professional_body')"></textarea>
              </div>
              <input class="btn btn-success" type="button" value="Validate" onclick="validateJsonTextarea('textarea_wrapper','create_professional_body')">
              <input class="btn btn-primary" type="button" value="Send Request" onclick="runAPI('create_professional')">
            </div>

              <div id="cases" class="each_api_action" style="display: none">
              <fieldset disabled>
                <div class="form-group">
                  <label for="">List Cases</label>
                </div>
              </fieldset>
              <input class="btn btn-primary" type="button" value="Send Request" onclick="runAPI('cases')">
            </div>

              <div id="case" class="each_api_action" style="display: none">
              <div class="form-group">
                <label for="">caseID</label>
                <input id="case_id" type="text" class="form-control" placeholder="Case ID here">
              </div>
              <input class="btn btn-primary" type="button" value="Send Request" onclick="runAPI('case')">
            </div>

              <div id="comments" class="each_api_action" style="display: none">
              <div class="form-group">
                  <label for="">caseID</label>
                  <input id="case_id" type="text" class="form-control" placeholder="Case ID here">
                  <textarea id="comments_body" class="form-control" rows="10" placeholder="" onkeydown="validateJsonTextarea('textarea_wrapper', 'comments_body')"></textarea>
                </div>
              <input class="btn btn-success" type="button" value="Validate" onclick="validateJsonTextarea('textarea_wrapper','comments_body')">
              <input class="btn btn-primary" type="button" value="Send Request" onclick="runAPI('comments')">
            </div>

              <div id="file_attachments" class="each_api_action" style="display: none">
              <div class="form-group">
                  <label for="">caseID</label>
                  <input id="case_id" type="text" class="form-control" placeholder="Case ID here">
                  <textarea id="file_attachments_body" class="form-control" rows="10" placeholder="" onkeydown="validateJsonTextarea('textarea_wrapper', 'file_attachments_body')"></textarea>
                </div>
              <input class="btn btn-success" type="button" value="Validate" onclick="validateJsonTextarea('textarea_wrapper','file_attachments_body')">
              <input class="btn btn-primary" type="button" value="Send Request" onclick="runAPI('file_attachments')">
            </div>

              <div id="resoultions" class="each_api_action" style="display: none">
              <div class="form-group">
                  <label for="">caseID</label>
                  <input id="case_id" type="text" class="form-control" placeholder="Case ID here">
                  <textarea id="resolutions_body" class="form-control" rows="10" placeholder="" onkeydown="validateJsonTextarea('textarea_wrapper', 'resolutions_body')"></textarea>
                </div>
              <input class="btn btn-success" type="button" value="Validate" onclick="validateJsonTextarea('textarea_wrapper','resolutions_body')">
              <input class="btn btn-primary" type="button" value="Send Request" onclick="runAPI('resolutions)">
            </div>

            <div id="api_response_wrapper" class="each_api_action top-buffer" style="display: none">
              <div id="loading_spinner" style="display: none"></div>
              <span id="api_response"></span>
            </div>

          </div> <!-- action body wrapper -->
        </div> <!-- API action content end -->
      </div> <!-- API content main body end -->

    </div> <!-- API section end -->

    <!-- Toke HTML column -->
    <div class="col-md-4 col-sm-offset-1">
      <div id="token_html"></div>
    </div>

  </div> <!-- end of main row -->
</div> <!-- container -->

<div id="footer_html"></div>

<script>
  $(document).ready(function() {
    loadTokenHtml();
    showAPIActionContent('list_cases_per_category');
  });

  var placeholder = '{"description": "...","endUserAccountName": "...","endUserEmail": "...","endUserName": "...","endUserPhoneNumber": "...","product": "...","severity": "...","title": "...","indirectCustomerAccountId": "..."}';
  placeholder = JSON.stringify(JSON.parse(placeholder), null, 2);
  $("#create_case_body").val(placeholder);

  var placeholder = '{"description": "...","endUserAccountName": "...","endUserEmail": "...","endUserName": "...","endUserPhoneNumber": "...","product": "...","severity": "...","title": "...","indirectCustomerAccountId": "..."}';
  placeholder = JSON.stringify(JSON.parse(placeholder), null, 2);
  $("#create_professional_body").val(placeholder);

  var placeholder = '{"comment": "Please give update on this case"}';
  placeholder = JSON.stringify(JSON.parse(placeholder), null, 2);
  $("#comments_body").val(placeholder);

  var placeholder = '';
  placeholder = JSON.stringify(JSON.parse(placeholder), null, 2);
  $("#file_attachments_body").val(placeholder);

  var placeholder = '{"comment": "Issue is resolved. close the case"}';
  placeholder = JSON.stringify(JSON.parse(placeholder), null, 2);
  $("#resolutionsbody").val(placeholder);

  function runAPI(apitype) {
    if (apitype == "list_cases_per_category") {
      var endpoint = "/cases/v1/";
      var pid = $("#case_id").val();
      if (pid) {
        endpoint = endpoint + pid;
        var return_response = sendAPIRequestGet(endpoint, "luna_token");
      } else {
        showNotification("Case ID is empty");
      }
    }

    if (apitype == "create_case") {
      var endpoint = "/cases/v1/";
      var body = $("#create_case_body").val();
      if (IsJsonString(body)) {
        var return_response = sendAPIRequestPost(endpoint, "luna_token", body);
      } else {
        showNotification("JSON is not in valid format");
      }
    }
    
    if (apitype == "list_professional") {
      var endpoint = "/cases/v1/PS";
      var return_response = sendAPIRequestGet(endpoint, "luna_token");
    }

    if (apitype == "create_professional") {
      var endpoint = "/cases/v1/PS";
      var body = $("#create_professional_body").val();
      if (IsJsonString(body)) {
        var return_response = sendAPIRequestPost(endpoint, "luna_token", body);
      } else {
        showNotification("JSON is not in valid format");
      }
    }

    if (apitype == "cases") {
      var endpoint = "/cases/v1/portal-user?";
      var return_response = sendAPIRequestGet(endpoint, "luna_token");
    }

    if (apitype == "case") {
      var endpoint = "/cases/v1/portal-user/case/";
      var pid = $("#case_id").val();
      if (pid) {
        endpoint = endpoint + pid;
        var return_response = sendAPIRequestGet(endpoint, "luna_token");
      } else {
        showNotification("Case ID is empty");
      }
    }

    if (apitype == "comments") {
      var endpoint = "/cases/v1/portal-user/case/";
      var body = $("#comments_body").val();
      var pid = $("#case_id").val();
      if (pid) {
        endpoint = endpoint + pid + "/notes";
        var return_response = sendAPIRequestPost(endpoint, "luna_token", body);
      } else {
        showNotification("Case ID is empty");
      }
    }

    if (apitype == "file_attachments") {
      var endpoint = "/cases/v1/portal-user/case/";
      var body = $("#file_attachments_body").val();
      var pid = $("#case_id").val();
      if (pid) {
        endpoint = endpoint + pid + "/files";
        var return_response = sendAPIRequestPost(endpoint, "luna_token", body);
      } else {
        showNotification("Case ID is empty");
      }
    }

     if (apitype == "resolutions") {
      var endpoint = "/cases/v1/portal-user/case/";
      var body = $("#resolutions_body").val();
      var pid = $("#case_id").val();
      if (pid) {
        endpoint = endpoint + pid + "/request-close";
        var return_response = sendAPIRequestPut(endpoint, "luna_token", body);
      } else {
        showNotification("Case ID is empty");
      }
    }
  }

</script>

